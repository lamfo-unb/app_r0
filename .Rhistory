view(rentabilidade_total)
perf_att <- colMeans((rentabilidade_classes/rentabilidade_total))
perf_att
colMeans((rentabilidade_classes))
(rentabilidade_classes/rentabilidade_total)
str(rentabilidade_classes)
str(rentabilidade_total)
perf_att <- colMeans(rentabilidade_classes)/mean(rentabilidade_total)
perf_att
sum(colMeans(rentabilidade_classes))
mean(rentabilidade_total)
return.scenar
rentabilidade_classes <-  ((classes_simul * cons_plano$A) + (classes_simul * cons_plano$B))/(sum(cons_plano$A + cons_plano$B))*100
View(rentabilidade_classes)
a <- colSums(rentabilidade_classes )
View(A)
View(A)
View(a)
a <- rowSums(rentabilidade_classes )
View(y)
View(rentabilidade_total)
rentabilidade_total <- retorno_simul[, 'y']
rentabilidade_classes <-  ((classes_simul %*% cons_plano$A) + (classes_simul %*% cons_plano$B))/(sum(cons_plano$A + cons_plano$B))*100
rentabilidade_classes <-  (apply(classes_simul, 1, function(x) cons_plano$A*x) +apply(classes_simul, 1, function(x) cons_plano$B*x))/(sum(cons_plano$A + cons_plano$B))*100
head(rentabilidade_classes)
str(rentabilidade_classes)
a <- apply(classes_simul, 1, function(x) cons_plano$A*x)
View(a)
?sweep
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, (cons_plano$A + cons_plano$B), "/")
View(rentabilidade_classes)
a <- rowSums(rentabilidade_classes )
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,(cons_plano$A + cons_plano$B)), "/")
a <- rowSums(rentabilidade_classes )
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*")
+sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,(cons_plano$A + cons_plano$B)), "/")
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*")
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*")
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,(cons_plano$A + cons_plano$B)), "/")
a <- sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*")
rentabilidade_classes <-  sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,sum(cons_plano$A + cons_plano$B)), "/")
a <- rowSums(rentabilidade_classes )
perf_att <- sweep(rentabilidade_classes, MARGIN=2,rentabilidade_total,"/")
View(perf_att)
perf <- data.frame(classe = dados_classe$CLASSE_NAME, perf_att) %>% group_by(classe) %>%
transmute(perf_att = sum(perf_att)) %>% unique()
perf_att <- colMeans(sweep(rentabilidade_classes, MARGIN=2,rentabilidade_total,"/"))
perf <- data.frame(classe = dados_classe$CLASSE_NAME, perf_att) %>% group_by(classe) %>%
transmute(perf_att = sum(perf_att)) %>% unique()
perf_att <-sweep(rentabilidade_classes, MARGIN=2,rentabilidade_total,"/")
a <- colSums(perf_att)
View(a)
a <- rowSums(perf_att)
View(a)
a <- rowSums(rentabilidade_classes)
rentabilidade_classes <-  (sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,sum(cons_plano$A + cons_plano$B)), "/"))*100
a <- rowSums(rentabilidade_classes)
perf_att <-sweep(rentabilidade_classes, MARGIN=2,rentabilidade_total,"/")
rentabilidade_classes <-  (sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,sum(cons_plano$A + cons_plano$B)), "/"))*100
str(rentabilidade_total)
perf_att <-sweep(rentabilidade_classes, MARGIN=2,rentabilidade_total,"/")
perf_att <-sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/")
perf_att <- colMeans(sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/"))
perf_att <- sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/")
a <- rowSums(perf_att)
perf_att <- rowMeans(sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/"))
perf_att <- colMeans(sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/"))
perf_att <- sweep(rentabilidade_classes, MARGIN=1,rentabilidade_total,"/")
View(rentabilidade_classes)
View(x)
View(classes_simul)
cons_plano$A
rentabilidade_total <- retorno_simul[, 'y']
rentabilidade_classes <-  (sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,sum(cons_plano$A + cons_plano$B)), "/"))*100
View(rentabilidade_classes)
View(rentabilidade_total)
str(rentabilidade_classes)
str(rentabilidade_total)
perf_att <- rentabilidade_classes/rentabilidade_total
a <- colSums(rentabilidade_classes)
a <- rowSums(rentabilidade_classes)
view(a)
require(stats) # for median
med.att <- apply(attitude, 2, median)
attitude
perf_att <-sweep(rentabilidade_classes ,MARGIN=1,FUN="/",STATS=rowSums( rentabilidade_total ))
rentabilidade_classes <-  (sweep(sweep(classes_simul, MARGIN=2, cons_plano$A, "*") +
sweep(classes_simul, MARGIN=2, cons_plano$B, "*"),MARGIN=2, ifelse((cons_plano$A + cons_plano$B)==0,1,sum(cons_plano$A + cons_plano$B)), "/"))*100
perf_att <-sweep(rentabilidade_classes ,MARGIN=1,FUN="/",STATS=rowSums( rentabilidade_total ))
perf_att <-sweep(rentabilidade_classes ,MARGIN=1,FUN="/",STATS= rentabilidade_total )
perf_att <-rowMean(rentabilidade_classes)/mean(rentabilidade_total)
perf_att <-rowMeans(rentabilidade_classes)/mean(rentabilidade_total)
perf_att <-colMeans(rentabilidade_classes)/mean(rentabilidade_total)
sum(perf_att )
library(readxl)
library(dplyr)
library(XLConnect)
library(RCurl)
library(tidyverse)
setwd("~/GitHub/covid19_subnotificacao")
pop2020.UF<-  readRDS("bases/pop2020.UF.RDS")
#População Korea: http://data.un.org/Data.aspx?d=POP&f=tableCode%3A22
pop.Korea <- read.csv("bases/UNdata_Export_20200508_095240534.csv") %>% filter(grepl("-",Age) & Sex=="Both Sexes" ) %>%
mutate(Faixa_Etaria.id= c(rep(1,3),rep(2:8,each=2),rep(9,4))) %>% group_by(Faixa_Etaria.id) %>%
summarise(pop.Korea.2019 = sum(Value)) %>% ungroup() %>% mutate(percent.pop.Korea=pop.Korea.2019/sum(pop.Korea.2019))
#População Itália
pop.Italy <- read.csv("bases/UNdata_Export_20200519_003338514.csv") %>% filter(grepl("-",Age) & Sex=="Both Sexes" ) %>%
mutate(Faixa_Etaria.id= c(rep(1,3),rep(2:8,each=2),rep(9,6))) %>% group_by(Faixa_Etaria.id) %>%
summarise(pop.Italy.2018 = sum(Value)) %>% ungroup() %>% mutate(percent.pop.Italy=pop.Italy.2018/sum(pop.Italy.2018))
### CFR KOREA
# https://europepmc.org/article/med/32233163#
CFR.korea <- read_xlsx("bases/CFR.KOREA.xlsx")
V.B <- crossprod(pop.Korea$percent.pop.Korea,CFR.korea$CFR)
### CFR ITALY
# https://europepmc.org/article/med/32233163#
CFR.italy <- read_xlsx("bases/CFR.ITALIA.xlsx")
V.B.IT <- crossprod(pop.Italy$percent.pop.Italy,CFR.italy$CFR)
vtb.ff <- function(x,base2,V.B=V.B){
V.T <- crossprod(x$percent.pop,base2$CFR)
V.TB <- V.T/V.B
return(V.TB)
}
#Vtb.UF <- data.frame(VTB=sapply(pop2020.UF, vtb.ff,base2=CFR.korea,V.B=V.B))
#Vtb.UF$state <- row.names(Vtb.UF)
#saveRDS( Vtb.UF,file = "Vtb.UF.SK.RDS")
Vtb.UF.SK <- readRDS(file = "bases/Vtb.UF.SK.RDS")
#Vtb.UF.it <- data.frame(VTB=sapply(pop2020.UF, vtb.ff,base2=CFR.italy,V.B=V.B.IT))
#Vtb.UF.it $state <- row.names(Vtb.UF.it )
#saveRDS( Vtb.UF.it,file = "Vtb.UF.ITA.RDS")
Vtb.UF.ITA <- readRDS(file = "bases/Vtb.UF.ITA.RDS")
#Base Município
base.mun <- read.csv(text = getURL("https://raw.githubusercontent.com/wcota/covid19br/master/cases-brazil-cities-time.csv"))
base.mun$state <- as.character(base.mun$state)
base.mun$date <- as.Date(base.mun$date)
base.mun$state <- ifelse(base.mun$state == "TOTAL", "BRASIL", base.mun$state)
base.mun <- base.mun %>% filter(date!=max(date))
base.mun <-  base.mun %>% mutate(is.last = ifelse(date=="2020-04-14",1,0))
#Base Município
base.mun <- read.csv(text = getURL("https://raw.githubusercontent.com/wcota/covid19br/master/cases-brazil-cities-time.csv"))
base.mun$state <- as.character(base.mun$state)
base.mun$date <- as.Date(base.mun$date)
base.mun$state <- ifelse(base.mun$state == "TOTAL", "BRASIL", base.mun$state)
base.mun <- base.mun %>% filter(date!=max(date))
base.mun <-  base.mun %>% mutate(is.last = max(date))
base.mun.last <- base.mun%>% filter(is.last==1)
base.mun.100 <- base.mun.last %>% filter(totalCases>100)
base.SP <- base.mun.last %>% filter(state=="SP")
hist(base.mun.100$deaths_by_totalCases,breaks = "fd")
summary(base.mun.100$deaths_by_totalCases)
#base estado
base <- base.mun %>% select(date, state, totalCases, newCases, deaths, newDeaths) %>%
group_by(date, state) %>% summarise_all(list(sum)) %>%
mutate(CFR.obs = deaths/totalCases) %>% ungroup() %>%
left_join(base.mun %>% group_by(state) %>% summarise(firt.date=min(date)),by="state")
base <- base.mun %>%
left_join(base.mun %>% group_by(state) %>% summarise(firt.date=min(date)),by="state") %>%
mutate(CFR.obs = deaths_by_totalCases)
#correção número de casos
CFR.KS.bb <-0.01635
lag.days <- 12
base.correct <- base %>% left_join(Vtb.UF.SK,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.SK = deaths/(VTB*CFR.KS.bb),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.SK=totalCases.est.SK-lag(totalCases.est.SK)) %>%
select(date.cases,,state,totalCases.est.SK,newCases.est.SK,VTB)
#correção número de casos Itália
CFR.ITA.bb <-0.134
lag.days <- 12
base.correct.2 <- base %>% left_join(Vtb.UF.ITA,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.ITA = deaths/(VTB*CFR.ITA.bb),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.ITA=totalCases.est.ITA-lag(totalCases.est.ITA)) %>%
select(date.cases,state,totalCases.est.ITA,newCases.est.ITA,VTB)
pop2020.UF<-  readRDS("bases/pop2020.UF.RDS")
#População Korea: http://data.un.org/Data.aspx?d=POP&f=tableCode%3A22
pop.Korea <- read.csv("bases/UNdata_Export_20200508_095240534.csv") %>% filter(grepl("-",Age) & Sex=="Both Sexes" ) %>%
mutate(Faixa_Etaria.id= c(rep(1,3),rep(2:8,each=2),rep(9,4))) %>% group_by(Faixa_Etaria.id) %>%
summarise(pop.Korea.2019 = sum(Value)) %>% ungroup() %>% mutate(percent.pop.Korea=pop.Korea.2019/sum(pop.Korea.2019))
#População Itália
pop.Italy <- read.csv("bases/UNdata_Export_20200519_003338514.csv") %>% filter(grepl("-",Age) & Sex=="Both Sexes" ) %>%
mutate(Faixa_Etaria.id= c(rep(1,3),rep(2:8,each=2),rep(9,6))) %>% group_by(Faixa_Etaria.id) %>%
summarise(pop.Italy.2018 = sum(Value)) %>% ungroup() %>% mutate(percent.pop.Italy=pop.Italy.2018/sum(pop.Italy.2018))
### CFR KOREA
# https://europepmc.org/article/med/32233163#
CFR.korea <- read_xlsx("bases/CFR.KOREA.xlsx")
V.B <- crossprod(pop.Korea$percent.pop.Korea,CFR.korea$CFR)
### CFR ITALY
# https://europepmc.org/article/med/32233163#
CFR.italy <- read_xlsx("bases/CFR.ITALIA.xlsx")
V.B.IT <- crossprod(pop.Italy$percent.pop.Italy,CFR.italy$CFR)
vtb.ff <- function(x,base2,V.B=V.B){
V.T <- crossprod(x$percent.pop,base2$CFR)
V.TB <- V.T/V.B
return(V.TB)
}
#Vtb.UF <- data.frame(VTB=sapply(pop2020.UF, vtb.ff,base2=CFR.korea,V.B=V.B))
#Vtb.UF$state <- row.names(Vtb.UF)
#saveRDS( Vtb.UF,file = "Vtb.UF.SK.RDS")
Vtb.UF.SK <- readRDS(file = "bases/Vtb.UF.SK.RDS")
#Vtb.UF.it <- data.frame(VTB=sapply(pop2020.UF, vtb.ff,base2=CFR.italy,V.B=V.B.IT))
#Vtb.UF.it $state <- row.names(Vtb.UF.it )
#saveRDS( Vtb.UF.it,file = "Vtb.UF.ITA.RDS")
Vtb.UF.ITA <- readRDS(file = "bases/Vtb.UF.ITA.RDS")
#Base Município
base.mun <- read.csv(text = getURL("https://raw.githubusercontent.com/wcota/covid19br/master/cases-brazil-cities-time.csv"))
base.mun$state <- as.character(base.mun$state)
base.mun$date <- as.Date(base.mun$date)
base.mun$state <- ifelse(base.mun$state == "TOTAL", "BRASIL", base.mun$state)
base.mun <- base.mun %>% filter(date!=max(date))
base.mun <-  base.mun %>% mutate(is.last = max(date))
base.mun.last <- base.mun%>% filter(is.last==1)
base.mun.100 <- base.mun.last %>% filter(totalCases>100)
base.SP <- base.mun.last %>% filter(state=="SP")
hist(base.mun.100$deaths_by_totalCases,breaks = "fd")
summary(base.mun.100$deaths_by_totalCases)
#base estado
base <- base.mun %>% select(date, state, totalCases, newCases, deaths, newDeaths) %>%
group_by(date, state) %>% summarise_all(list(sum)) %>%
mutate(CFR.obs = deaths/totalCases) %>% ungroup() %>%
left_join(base.mun %>% group_by(state) %>% summarise(firt.date=min(date)),by="state")
#correção número de casos
CFR.KS.bb <-0.01635
lag.days <- 12
base.correct <- base %>% left_join(Vtb.UF.SK,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.SK = deaths/(VTB*CFR.KS.bb),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.SK=totalCases.est.SK-lag(totalCases.est.SK)) %>%
select(date.cases,state,totalCases.est.SK,newCases.est.SK,VTB)
#correção número de casos Itália
CFR.ITA.bb <-0.134
lag.days <- 12
base.correct.2 <- base %>% left_join(Vtb.UF.ITA,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.ITA = deaths/(VTB*CFR.ITA.bb),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.ITA=totalCases.est.ITA-lag(totalCases.est.ITA)) %>%
select(date.cases,state,totalCases.est.ITA,newCases.est.ITA,VTB)
base <- base%>% left_join(base.correct, by=c("date"="date.cases","state"="state")) %>%
left_join(base.correct.2, by=c("date"="date.cases","state"="state")) %>%  arrange(state,date) %>%
mutate(totalCases.est = sqrt(totalCases.est.ITA*totalCases.est.SK),newCases.est = totalCases.est-lag(totalCases.est))
View(base)
base.correct <- base %>% left_join(Vtb.UF.SK,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.SK = round(deaths/(VTB*CFR.KS.bb)),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.SK=totalCases.est.SK-lag(totalCases.est.SK)) %>%
select(date.cases,state,totalCases.est.SK,newCases.est.SK,VTB)
#correção número de casos Itália
CFR.ITA.bb <-0.134
lag.days <- 12
base.correct.2 <- base %>% left_join(Vtb.UF.ITA,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.ITA = round(deaths/(VTB*CFR.ITA.bb)),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.ITA=round(totalCases.est.ITA-lag(totalCases.est.ITA))) %>%
select(date.cases,state,totalCases.est.ITA,newCases.est.ITA,VTB)
base <- base%>% left_join(base.correct, by=c("date"="date.cases","state"="state")) %>%
left_join(base.correct.2, by=c("date"="date.cases","state"="state"))
View(base)
#base estado
base <- base.mun %>% select(date, state, totalCases, newCases, deaths, newDeaths) %>%
group_by(date, state) %>% summarise_all(list(sum)) %>%
mutate(CFR.obs = deaths/totalCases) %>% ungroup() %>%
left_join(base.mun %>% group_by(state) %>% summarise(firt.date=min(date)),by="state")
#correção número de casos
CFR.KS.bb <-0.01635
lag.days <- 12
base.correct <- base %>% left_join(Vtb.UF.SK,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.SK = round(deaths/(VTB*CFR.KS.bb)),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.SK=totalCases.est.SK-lag(totalCases.est.SK)) %>%
select(date.cases,state,totalCases.est.SK,newCases.est.SK,VTB)
#correção número de casos Itália
CFR.ITA.bb <-0.134
lag.days <- 12
base.correct.2 <- base %>% left_join(Vtb.UF.ITA,by="state" ) %>% filter(deaths>10) %>%
mutate(totalCases.est.ITA = round(deaths/(VTB*CFR.ITA.bb)),date.cases = date-lag.days) %>%
arrange(state,date.cases)%>%group_by(state) %>%
mutate(newCases.est.ITA=round(totalCases.est.ITA-lag(totalCases.est.ITA))) %>%
select(date.cases,state,totalCases.est.ITA,newCases.est.ITA,VTB)
base <- base%>% left_join(base.correct, by=c("date"="date.cases","state"="state")) %>%
left_join(base.correct.2, by=c("date"="date.cases","state"="state"))
View(base)
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA)
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
base_long <- base %>% gather(key="variavel",value="valor",-date)
View(base_long)
View(base)
base_long <- base %>% gather(key="variavel",value="valor",-date,-state)
View(base_long)
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()++
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel))+geom_line()+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)))+geom_line()+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), col=variavel))+geom_line()+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
+  labs(color=NULL)+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
labs(color=NULL)+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("Estimativa Coréia","Estimativa Itália","Observado"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
labs(color=NULL)+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
View(base_long.plot)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
labs(color=NULL)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), col=variavel)+geom_line()+
labs(color=NULL)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), fill=variavel,col=variavel)+geom_line()+
labs(color=NULL)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor)), fill=variavel,colour=variavel)+geom_line()+
labs(color=NULL)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel)_+geom_line()+
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("Estimativa na base log")
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("Estimativa na base log")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.char,".pdf"),
height = 8,
width = 12)
state.cr="SP"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.char,".pdf"),
height = 8,
width = 12)
state.cr="RJ"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.char,".pdf"),
height = 8,
width = 12)
View(base_long.plot)
View(base_long)
state.cr="BRASIL"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.char,".pdf"),
height = 8,
width = 12)
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.omit(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
a <- base_long.plot %>% na.exclude()
View(a)
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
base_long <- base %>% na.exclude() %>% gather(key="variavel",value="valor",-date,-state)
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
state.cr="CE"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.char,".pdf"),
height = 8,
width = 12)
ggsave(paste0("resultados/CFR_",state.cr,".pdf"),
height = 8,
width = 12)
state.cr="SP"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.cr,".pdf"),
height = 8,
width = 12)
state.cr="RJ"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.cr,".pdf"),
height = 8,
width = 12)
state.cr="brasil"
state.cr="BRASIL"
vars.cr =  c("totalCases", "totalCases.est.SK","totalCases.est.ITA")
base_long.plot <- base_long %>% filter(state==state.cr & variavel %in% vars.cr) %>% na.omit()
ggplot(base_long.plot %>% na.exclude(), aes(x=date,y=log(valor), fill=variavel,colour=variavel))+geom_line()+
labs(color=NULL)+xlab("Data") + ylab("log(Estimativa)")+
scale_colour_manual(values=c("red","blue","green"),
breaks=c("totalCases.est.SK","totalCases.est.ITA","totalCases"),
labels=c("Estimativa Coréia","Estimativa Itália","Observado"))
ggsave(paste0("resultados/CFR_",state.cr,".pdf"),
height = 8,
width = 12)
